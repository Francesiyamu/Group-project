<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Klantenfactuur toevoegen</title>
    <link rel="stylesheet" href="../CSS/klantFactuur.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!--https://www.w3schools.com/icons/tryit.asp?filename=tryicons_fa-sign-out-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>



    <form id="form_klantFactuur">
        <h1>Factuur klant toevoegen</h1>

        <div class="inputs">     
            <div id="factuurgegevens_box">
                <h2>Factuurgegevens</h2>

                <div class="form_group">
                    <label for="factuurnr">Factuurnummer:</label>
                    <input type="text" class="form-control" id="factuurnr" name="factuurnr" required>
                </div>

                <div class="form_group">
                    <label for="factuurDatum">Factuur datum:</label>
                    <input type="date" class="form-control" id="factuurDatum" name="factuurDatum" required>
                </div>

                <div class="form_group">
                    <label for="projectnaam">Projectnaam:</label>
                    <input type="text" class="form-control" id="projectnaam" name="projectnaam" max="255" required>
                </div>

                <div class="form_group">
                    <label for="klantnaam">Klantnaam:</label>
                    <input type="text" class="form-control" id="klantnaam" name="klantnaam" max="255" required>
                </div>

                <div class="form_group">
                    <label for="totaalBedrag">Totaal bedrag:</label>
                    <input type="text" class="form-control" id="totaalBedrag" name="totaalBedrag" max="20" required>
                </div>

                <div class="form_group">
                    <label for="BTW">BTW-percentage:</label>
                    <select name="BTW" id="BTW" class="form-control" required>
                        <option value="0">0%</option>
                        <option value="6" >6%</option>
                        <option value="12">12%</option>
                        <option value="21" selected>21%</option>
                    </select>
                </div>   

                <div class="form_group">
                    <label for="BTW_bedrag">BTW bedrag:</label>
                    <input type="text" class="form-control" id="BTW_bedrag" name="BTW_bedrag" max="20" required>
                </div>

                <div class="form_group">
                    <label for="status">Status betaling:</label> 
                    <select name="status" id="status" class="form-control">
                        <option value="betaald">Betaald</option>
                        <option value="nietBetaald" selected>Niet betaald</option>
                    </select>
                </div>

                <div class="form_group">
                    <label for="betalingsDatum">Datum betaling:</label>
                    <input type="date" class="form-control" id="betalingsDatum" name="betalingsDatum" required>
                </div>
                        
                <div class="form_group">
                    <label for="beschrijving">Beschrijving:</label>
                    <textarea name="beschrijving" id="beschrijving" cols="85" rows="4" placeholder="Voer hier een beschrijving of opmerking in."></textarea>
                </div>            
                            
            </div>
                        
            <div id="factuurUploaden_box">
                <h2>Factuur</h2>
                <div id="factuurUploaden">
                    <iframe src="../../assests/WE - HC1 Overzicht & HTML basis.pdf" frameborder="0"   height="100%"></iframe><br>
                </div>

                <div id="huidigBestand_box">
                    <label for="filesInput" id="filesLabel">Huidige bestand(en):</label>
                    <input list="filesList" id="filesInput" placeholder="Selecteer het bestand">
                    <datalist id="filesList">
                        <option value="WE - HC2 CSS Basis, Kleuren & Tekst.pdf"></option>
                        <option value="WE - HC4-Tabellen Formulieren AudioVideo.pdf"></option>
                        <option value="Samenvatting Web essentials.docx"></option>
                    </datalist>
                </div>


                <div id="nieuwBestand_box">
                    <input type="file" id="selector" multiple></input>
                    <label for="selector" id="fileSelect" class="hidden" hidden> <span>Nieuw bestand selecteren</span> &#128194; </label> 
                </div>
                
            </div>
                    
        </div>
        <div class="btns">
            <a href="home_klantFacturen.html" id="cancelbtn" class="btn_bottom">Annuleren</a>
            <input type="submit" id="submitbtn" value="Toevoegen" class="btn_bottom">
        </div>
    </form>  

<script>

const form = document.getElementById('uploadform');

			const sendFiles = async() =>{
				//Object

				const myFiles = document.getElementById('fileInput').files

				const formData = new formData()

				Object.keys(myFiles).forEach(key =>{
					formData.append(myFiles.item(key).name, myFiles.item(key))
				})

				const response = await fetch('http://localhost:3000/upload',{
					method :'POST',
					body: formData
				})

				const json = await response.json()

				const h2 = document.querySelectorAll('h2');
				h2.textContent = `Status: ${json?.status}`

				const h3 = document.querySelector('h3')
				h3.textContent =json?.message

				console.log(json)

			}
			//form submission
			form.addEventListener('submit', (e) => {
				e.preventDefault()
				sendFiles()
			})


</script>



</body>
</html>